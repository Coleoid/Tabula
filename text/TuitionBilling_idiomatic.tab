AC-20439: Tuition billing

"Setup"...
    >install: Organization FNH Management, Curriculum FNH Management, Class Template Add Edit Workflow

    "Setup - create a training academy and an organization":
    Set today to "1/1/2023"
    Create academy named "Testopia Academy"
    Create organization named "Local Police Department"
    Create program category "Training"
    Create class template named "Highway Pursuit" in program "Driving" for organization "Testopia Academy"

    "Create a new program":
    >use: Edit Program Workflow
    Browse to page from organization "Testopia Academy"
    Set program name to "Driving"
    Select "Training" as category
    Set program "is" active
    Save
    Validate Class Template named "Highway Pursuit" in program "Driving"

    "Setup - Add a new class":
    >use: Edit Class Workflow
    Browse to page
    Create Class named #name from "Highway Pursuit" starting "01/1/2023" ending #endDate
    [ Name                | End Date ]
    | Highway Pursuit 100 | 1/1/2023 |
    | Highway Pursuit 101 | 1/1/2023 |
    | Highway Pursuit 102 | 2/1/2023 |
    | Highway Pursuit 103 | 2/1/2023 |

    "Setup class registrations":
    >use: Add Edit Class Registration Workflow
    Create class registration for "Highway Pursuit 100" to start "0" days before and end "0" days after with "10" students max
    Create class registration for "Highway Pursuit 101" to start "0" days before and end "0" days after with "10" students max
    Create class registration for "Highway Pursuit 102" to start "0" days before and end "0" days after with "10" students max
.

"Set and verify Tuitions"...
    >use: Class Descriptive Fields Workflow

    Browse to page for class #name
    Enter text #fees for "Fees"
    Click button "Done"

    Browse to page for class #name
    Verify text for "Fees" is #fees
.
[ Name                | Fees   ]
| Highway Pursuit 100 | 101.42 |
| Highway Pursuit 101 | 131.45 |
| Highway Pursuit 102 | 152.55 |
| Highway Pursuit 103 | 172.55 |


"Create people":
>use: Person FNH Management
Create person #name with academy id #id
[ Name                | ID ]
| Agmeier, Armin      | A1 |
| Bradley, Blake      | B1 |
| Brown, Wendell      | B2 |
| Chase, Charles      | C1 |
| Doo, Dewbie         | D1 |
| Easley, Erwin       | E1 |
| Eady, Forrest       | E2 |
| Fairchild, Florence | F1 |
| Johnson, Danny      | J1 |
| Murphy, Sam         | M1 |
| Nicholas, Jamila    | N1 |
| Worthen, Jorge      | W1 |

"Enable billing":
>use: Billing Preferences Workflow
Browse to page
Choose to track billing
Prepare to save
Click save

"Disable billing for class tuition":
>use: Billing Preferences Workflow
Browse to page
Click to edit category "Class"
Choose not to track category
Prepare to save preference
Click save preference

// -- NONE --------------------------------------------------------------

"Register Agmeier":
>use: Register Student Workflow
Browse to page from available training list registering for "Highway Pursuit 100"
Select student "Agmeier, Armin"
Click Register

"Verify no bill was created at Registration":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "0" items

"Enroll Agmeier":
>use: Registration Management
Enroll "Agmeier, Armin" in "Highway Pursuit 100" from registration

"Verify no bill was created at Enrollment":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "0" items

"Complete class":
>use: Task Runner Workflow
Run task "AutoUpdateClassStatus"

"Verify no bill was created at Completion":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "0" items


// -- REGISTRATION --------------------------------------------------------------

"Change billing to occur at registration":
>use: Billing Preferences Workflow
Browse to page
Click to edit category "Class"
Choose to track category
Choose to create billing information "At registration"
Choose to calculate billing as a variable fee
Choose "Individual" to be responsible for fees
Prepare to save preference
Click save preference

"Register Bradley, Blake":
>use: Register Student Workflow
Browse to page from available training list registering for "Highway Pursuit 100"
Select student "Bradley, Blake"
Select  "Individual" for Tuition Bill to Party
Click Register

"Verify bill was created at registration":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "1" items

"Transfer Bradley, Blake":
>use: Transfer Student Workflow
Browse to transfer registration for "Bradley, Blake" from class "Highway Pursuit 100"
Select "Highway Pursuit 101" to transfer to
Click transfer

"Verify bill was created at registration transfer":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "2" items

"Enroll Nicholas, Jamila directly in course without registration":
>use: Add Enrollment Workflow
Browse to page for "Highway Pursuit 103"
Select "Nicholas, Jamila" to enroll
Select  "Individual" for Tuition Bill to Party
Click Continue

"Verify bill was created by direct enrollment":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "3" items

// same for all 3:

? Verify row #Row
? Verify "Category" is "Class"
? Verify "Date" is equal to today
? Verify "Billing Usage" is ""
? Verify "Usage Period Start" is ""
? Verify "Usage Period End" is ""
? Verify "Cancelled" is "N"
? Verify Fields match Row values  //TODO: how?
[ Row | Bill Created At | Event / Class*                | Billing Item                  | For              | Bill To          | Amount |
| 1   | Registration    | Driving - Highway Pursuit 100 | Driving - Highway Pursuit 100 | Bradley, Blake   | Bradley, Blake   | 101.42 |
| 2   | Registration    | Driving - Highway Pursuit 101 | Driving - Highway Pursuit 101 | Bradley, Blake   | Bradley, Blake   | 131.55 |
| 3   | Enrollment      | Driving - Highway Pursuit 103 | Driving - Highway Pursuit 103 | Nicholas, Jamila | Nicholas, Jamila | 172.55 |


"Bradley, Blake":
>use: Registration Management
Enroll "Bradley, Blake" in "Highway Pursuit 101" from registration

"Verify no bill was created at enrollment":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "3" items

"Complete class":
>use: Task Runner Workflow
Run task "AutoUpdateClassStatus"

"Verify no bill was created at class completion":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "3" items


// -- ENROLLMENT --------------------------------------------------------------

"Change billing to at enrollment with flat fee":
>use: Billing Preferences Workflow
Browse to page
Click to edit category "Class"
Choose to track category
Choose to create billing information "At enrollment"
Choose to calculate billing as a flat fee
Enter "99.99" as a flat fee
Choose "Individual" to be responsible for fees
Prepare to save preference
Click save preference


"Register C":
>use: Register Student Workflow
Browse to page from available training list registering for "Highway Pursuit 100"
Select student "Chase, Charles"
Select  "Individual" for Tuition Bill to Party
Click Register

"Verify no bill was created at registration":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "3" items

"Enroll person C":
>use: Registration Management
Enroll "Chase, Charles" in "Highway Pursuit 100" from registration


"Verify  bill was created at enrollment":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "4" items
? Verify row "4"
? Verify "Category" is "Class"
? Verify "Bill Created At" is "Enrollment"
? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
? Verify "Billing Item" is "Driving - Highway Pursuit 100"
? Verify "Billing Usage" is ""
? Verify "Usage Period Start" is ""
? Verify "Usage Period End" is ""
? Verify "For" is "Chase, Charles"
? Verify "Date" is equal to today
? Verify "Bill To" is "Chase, Charles"
? Verify "Amount" is "99.99"
? Verify "Cancelled" is "N"

"Enroll person D directly":
>use: Add Enrollment Workflow
Browse to page for "Highway Pursuit 100"
Select "Doo, Dewbie" to enroll
Select  "Individual" for Tuition Bill to Party
Click Continue


"Verify  bill was created at enrollment":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "5" items
? Verify row "5"
? Verify "Category" is "Class"
? Verify "Bill Created At" is "Enrollment"
? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
? Verify "Billing Item" is "Driving - Highway Pursuit 100"
? Verify "Billing Usage" is ""
? Verify "Usage Period Start" is ""
? Verify "Usage Period End" is ""
? Verify "For" is "Doo, Dewbie"
? Verify "Date" is equal to today
? Verify "Bill To" is "Doo, Dewbie"
? Verify "Amount" is "99.99"
? Verify "Cancelled" is "N"

"Complete class":
>use: Task Runner Workflow
Run task "AutoUpdateClassStatus"

"Verify no bill was created at enrollment":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "5" items

"Verify billing items are returned correctly in web service":
>use: Accounting Api Workflow
Get invoiceable items
? Verify there are "5" invoiceable items
Begin verifying invoiceable item "1"
    ? Verify invoiceable item Event is "Driving - Highway Pursuit 100"
    ? Verify invoiceable item Item is "Driving - Highway Pursuit 100"
    ? Verify invoiceable item Usage is blank
    ? Verify invoiceable item PeriodStart is null
    ? Verify invoiceable item PeriodEnd is null
    ? Verify invoiceable item BillFor is "Bradley, Blake"
    ? Verify invoiceable item BillTo is "Bradley, Blake"
    ? Verify invoiceable item BillToID is greater than zero
    ? Verify invoiceable item Amount is "101.42"
    ? Verify invoiceable item CreationDate is "1/1/2023"
Begin verifying invoiceable item "2"
    ? Verify invoiceable item Event is "Driving - Highway Pursuit 101"
    ? Verify invoiceable item Item is "Driving - Highway Pursuit 101"
    ? Verify invoiceable item Usage is blank
    ? Verify invoiceable item PeriodStart is null
    ? Verify invoiceable item PeriodEnd is null
    ? Verify invoiceable item BillFor is "Bradley, Blake"
    ? Verify invoiceable item BillTo is "Bradley, Blake"
    ? Verify invoiceable item BillToID is greater than zero
    ? Verify invoiceable item Amount is "131.45"
    ? Verify invoiceable item CreationDate is "1/1/2023"
Begin verifying invoiceable item "3"
    ? Verify invoiceable item Event is "Driving - Highway Pursuit 103"
    ? Verify invoiceable item Item is "Driving - Highway Pursuit 103"
    ? Verify invoiceable item Usage is blank
    ? Verify invoiceable item PeriodStart is null
    ? Verify invoiceable item PeriodEnd is null
    ? Verify invoiceable item BillFor is "Nicholas, Jamila"
    ? Verify invoiceable item BillTo is "Nicholas, Jamila"
    ? Verify invoiceable item Amount is "172.55"
    ? Verify invoiceable item CreationDate is "1/1/2023"
Begin verifying invoiceable item "4"
    ? Verify invoiceable item Event is "Driving - Highway Pursuit 100"
    ? Verify invoiceable item Item is "Driving - Highway Pursuit 100"
    ? Verify invoiceable item Usage is blank
    ? Verify invoiceable item PeriodStart is null
    ? Verify invoiceable item PeriodEnd is null
    ? Verify invoiceable item BillFor is "Chase, Charles"
    ? Verify invoiceable item BillTo is "Chase, Charles"
    ? Verify invoiceable item BillToID is greater than zero
    ? Verify invoiceable item Amount is "99.99"
    ? Verify invoiceable item CreationDate is "1/1/2023"
Begin verifying invoiceable item "5"
    ? Verify invoiceable item Event is "Driving - Highway Pursuit 100"
    ? Verify invoiceable item Item is "Driving - Highway Pursuit 100"
    ? Verify invoiceable item Usage is blank
    ? Verify invoiceable item PeriodStart is null
    ? Verify invoiceable item PeriodEnd is null
    ? Verify invoiceable item BillFor is "Doo, Dewbie"
    ? Verify invoiceable item BillTo is "Doo, Dewbie"
    ? Verify invoiceable item Amount is "99.99"
    ? Verify invoiceable item CreationDate is "1/1/2023"


// -- CANCELLATIONS -----------------------------------------------------------
"Delete an enrollment":
>use: Student List Workflow
Browse to Student List for "Highway Pursuit 100"
Consider student "3"
? Verify label for "Student Name" is "Doo, Dewbie"
Select student "Doo, Dewbie"
Delete enrollment

"Cancel a registration":
>use: Registration Management
Cancel registration for "Bradley, Blake" in "Highway Pursuit 101"

"Verify  bill was created at enrollment":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "5" items
? Verify row "1"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
    ? Verify "Bill To" is "Bradley, Blake"
    ? Verify "Cancelled" is "Y"
? Verify row "2"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 101"
    ? Verify "Bill To" is "Bradley, Blake"
    ? Verify "Cancelled" is "Y"
? Verify row "3"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 103"
    ? Verify "For" is "Nicholas, Jamila"
    ? Verify "Cancelled" is "N"
? Verify row "4"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
    ? Verify "For" is "Chase, Charles"
    ? Verify "Cancelled" is "N"
? Verify row "5"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
    ? Verify "For" is "Doo, Dewbie"
    ? Verify "Cancelled" is "Y"

"Cancel a class":
>use: Edit Class Workflow
Browse to page to edit class "Highway Pursuit 100"
Select status "Cancelled"
Save Class
Confirm class cancellation

"Change billing to at registration":
>use: Billing Preferences Workflow
Browse to page
Click to edit category "Class"
Choose to track category
Choose to create billing information "At registration"
Choose to calculate billing as a variable fee
Choose "Individual" to be responsible for fees
Prepare to save preference
Click save preference

"Register Eady, Forrest":
>use: Register Student Workflow
Browse to page from available training list registering for "Highway Pursuit 100"
Select student "Eady, Forrest"
Select  "Individual" for Tuition Bill to Party
Click Register

"Register Johnson, Danny":
>use: Register Student Workflow
Browse to page from available training list registering for "Highway Pursuit 100"
Select student "Johnson, Danny"
Select "Individual" for Tuition Bill to Party
Click Register

"Change billing to at enrollment with flat fee":
>use: Billing Preferences Workflow
Browse to page
Click to edit category "Class"
Choose to track category
Choose to create billing information "At enrollment"
Choose to calculate billing as a flat fee
Enter "104.99" as a flat fee
Choose "Individual" to be responsible for fees
Prepare to save preference
Click save preference

"Enroll Worthen, Jorge directly":
>use: Add Enrollment Workflow
Browse to page for "Highway Pursuit 100"
Select "Worthen, Jorge" to enroll
Select  "Individual" for Tuition Bill to Party
Click Continue

"Enroll Murphy, Sam directly":
>use: Add Enrollment Workflow
Browse to page for "Highway Pursuit 100"
Select "Murphy, Sam" to enroll
Select  "Individual" for Tuition Bill to Party
Click Continue

"Enroll Brown, Wendell directly":
>use: Add Enrollment Workflow
Browse to page for "Highway Pursuit 101"
Select "Brown, Wendell" to enroll
Select "Individual" for Tuition Bill to Party
Click Continue

"Delete Registration for Eady, Forrest":
>use: Registration Management
Delete registration for "Eady, Forrest" in "Highway Pursuit 100"

"Move Brown, Wendell from enrolled to registered":
>use: Registration Management
Move "Brown, Wendell" in "Highway Pursuit 101" from enrolled to registered
? Verify "Brown, Wendell" is registered for class "Highway Pursuit 101"

"Delete Worthen, Jorge":
>use: Person Management
Delete person "Worthen, Jorge"

"Move Murphy, Sam and Johnson, Danny to waitlist":
>use: Registration Management
Move "Murphy, Sam" in "Highway Pursuit 100" to waitlist
? Verify "Murphy, Sam" is waitlisted for class "Highway Pursuit 100"
Move "Johnson, Danny" in "Highway Pursuit 100" to waitlist
? Verify "Johnson, Danny" is waitlisted for class "Highway Pursuit 100"

"Change billing to at enrollment with flat fee":
>use: Billing Preferences Workflow
Browse to page
Click to edit category "Class"
Choose to track category
Choose to create billing information "At registration"
Choose to calculate billing as a flat fee
Enter "200.00" as a flat fee
Choose "Individual" to be responsible for fees
Prepare to save preference
Click save preference

"Register person A":
>use: Register Student Workflow
Browse to page from available training list registering for "Highway Pursuit 100"
Select student "Fairchild, Florence"
Click Register

"Cancel a registration":
>use: Registration Management
Cancel registration for "Fairchild, Florence" in "Highway Pursuit 100"

"Verify  bill was created at enrollment":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "11" items
? Verify row "1"
    ? Verify "Category" is "Class"
    ? Verify "Bill Created At" is "Registration"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Item" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Usage" is blank
    ? Verify "Usage Period Start" is blank
    ? Verify "Usage Period End" is blank
    ? Verify "For" is "Bradley, Blake"
    ? Verify "Date" is "01/01/2023"
    ? Verify "Bill To" is "Bradley, Blake"
    ? Verify "Amount" is "101.42"
    ? Verify "Cancelled" is "Y"
    ? Verify "Description" is "TUITION CHARGE for Bradley, Blake (B1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify "Quantity" is "1"
    ? Verify "Unit Price" is "101.42"
? Verify row "2"
    ? Verify "Category" is "Class"
    ? Verify "Bill Created At" is "Registration"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 101"
    ? Verify "Billing Item" is "Driving - Highway Pursuit 101"
    ? Verify "Billing Usage" is blank
    ? Verify "Usage Period Start" is blank
    ? Verify "Usage Period End" is blank
    ? Verify "For" is "Bradley, Blake"
    ? Verify "Date" is "01/01/2023"
    ? Verify "Bill To" is "Bradley, Blake"
    ? Verify "Amount" is "131.45"
    ? Verify "Cancelled" is "Y"
    ? Verify "Description" is "TUITION CHARGE for Bradley, Blake (B1): Driving - Highway Pursuit 101 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify "Quantity" is "1"
    ? Verify "Unit Price" is "131.45"
? Verify row "3"
    ? Verify "Category" is "Class"
    ? Verify "Bill Created At" is "Enrollment"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 103"
    ? Verify "Billing Item" is "Driving - Highway Pursuit 103"
    ? Verify "Billing Usage" is blank
    ? Verify "Usage Period Start" is blank
    ? Verify "Usage Period End" is blank
    ? Verify "For" is "Nicholas, Jamila"
    ? Verify "Date" is "01/01/2023"
    ? Verify "Bill To" is "Nicholas, Jamila"
    ? Verify "Amount" is "172.55"
    ? Verify "Cancelled" is "N"
    ? Verify "Description" is "TUITION CHARGE for Nicholas, Jamila (N1): Driving - Highway Pursuit 103 (occurring 01/01/2023 - 02/01/2023)"
    ? Verify "Quantity" is "1"
    ? Verify "Unit Price" is "172.55"
? Verify row "4"
    ? Verify "Category" is "Class"
    ? Verify "Bill Created At" is "Enrollment"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Item" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Usage" is blank
    ? Verify "Usage Period Start" is blank
    ? Verify "Usage Period End" is blank
    ? Verify "For" is "Chase, Charles"
    ? Verify "Date" is "01/01/2023"
    ? Verify "Bill To" is "Chase, Charles"
    ? Verify "Amount" is "99.99"
    ? Verify "Cancelled" is "Y"
    ? Verify "Description" is  "TUITION CHARGE for Chase, Charles (C1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify "Quantity" is "1"
    ? Verify "Unit Price" is "99.99"
? Verify row "5"
    ? Verify "Category" is "Class"
    ? Verify "Bill Created At" is "Enrollment"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Item" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Usage" is blank
    ? Verify "Usage Period Start" is blank
    ? Verify "Usage Period End" is blank
    ? Verify "For" is "Doo, Dewbie"
    ? Verify "Cancelled" is "Y"
    ? Verify "Date" is "01/01/2023"
    ? Verify "Bill To" is "Doo, Dewbie"
    ? Verify "Amount" is "99.99"
    ? Verify "Description" is "TUITION CHARGE for Doo, Dewbie (D1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify "Quantity" is "1"
    ? Verify "Unit Price" is "99.99"
? Verify row "6"
    ? Verify "Category" is "Class"
    ? Verify "Bill Created At" is "Registration"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Item" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Usage" is blank
    ? Verify "Usage Period Start" is blank
    ? Verify "Usage Period End" is blank
    ? Verify "For" is "Eady, Forrest"
    ? Verify "Cancelled" is "Y"
    ? Verify "Date" is "01/01/2023"
    ? Verify "Bill To" is "Eady, Forrest"
    ? Verify "Amount" is "101.42"
    ? Verify "Description" is "TUITION CHARGE for Eady, Forrest (E2): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify "Quantity" is "1"
    ? Verify "Unit Price" is "101.42"
? Verify row "7"
    ? Verify "Category" is "Class"
    ? Verify "Bill Created At" is "Registration"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Item" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Usage" is blank
    ? Verify "Usage Period Start" is blank
    ? Verify "Usage Period End" is blank
    ? Verify "For" is "Johnson, Danny"
    ? Verify "Cancelled" is "Y"
    ? Verify "Date" is "01/01/2023"
    ? Verify "Bill To" is "Johnson, Danny"
    ? Verify "Amount" is "101.42"
    ? Verify "Description" is  "TUITION CHARGE for Johnson, Danny (J1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify "Quantity" is "1"
    ? Verify "Unit Price" is "101.42"
? Verify row "8"
    ? Verify "Category" is "Class"
    ? Verify "Bill Created At" is "Enrollment"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Item" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Usage" is blank
    ? Verify "Usage Period Start" is blank
    ? Verify "Usage Period End" is blank
    ? Verify "For" is "Worthen, Jorge"
    ? Verify "Cancelled" is "Y"
    ? Verify "Date" is "01/01/2023"
    ? Verify "Bill To" is "Worthen, Jorge"
    ? Verify "Amount" is "104.99"
    ? Verify "Description" is "TUITION CHARGE for Worthen, Jorge (W1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify "Quantity" is "1"
    ? Verify "Unit Price" is "104.99"
? Verify row "9"
    ? Verify "Category" is "Class"
    ? Verify "Bill Created At" is "Enrollment"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Item" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Usage" is blank
    ? Verify "Usage Period Start" is blank
    ? Verify "Usage Period End" is blank
    ? Verify "For" is "Murphy, Sam"
    ? Verify "Cancelled" is "Y"
    ? Verify "Date" is "01/01/2023"
    ? Verify "Bill To" is "Murphy, Sam"
    ? Verify "Amount" is "104.99"
    ? Verify "Description" is "TUITION CHARGE for Murphy, Sam (M1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify "Quantity" is "1"
    ? Verify "Unit Price" is "104.99"
? Verify row "10"
    ? Verify "Category" is "Class"
    ? Verify "Bill Created At" is "Enrollment"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 101"
    ? Verify "Billing Item" is "Driving - Highway Pursuit 101"
    ? Verify "Billing Usage" is blank
    ? Verify "Usage Period Start" is blank
    ? Verify "Usage Period End" is blank
    ? Verify "For" is "Brown, Wendell"
    ? Verify "Cancelled" is "Y"
    ? Verify "Date" is "01/01/2023"
    ? Verify "Bill To" is "Brown, Wendell"
    ? Verify "Amount" is "104.99"
    ? Verify "Description" is "TUITION CHARGE for Brown, Wendell (B2): Driving - Highway Pursuit 101 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify "Quantity" is "1"
    ? Verify "Unit Price" is "104.99"
? Verify row "11"
    ? Verify "Category" is "Class"
    ? Verify "Bill Created At" is "Registration"
    ? Verify "Event / Class*" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Item" is "Driving - Highway Pursuit 100"
    ? Verify "Billing Usage" is blank
    ? Verify "Usage Period Start" is blank
    ? Verify "Usage Period End" is blank
    ? Verify "For" is "Fairchild, Florence"
    ? Verify "Cancelled" is "Y"
    ? Verify "Date" is "01/01/2023"
    ? Verify "Bill To" is "Fairchild, Florence"
    ? Verify "Amount" is "200"
    ? Verify "Description" is "TUITION CHARGE for Fairchild, Florence (F1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify "Quantity" is "1"
    ? Verify "Unit Price" is "200"

"Verify that cancellations are transmitted to an external accounting system":
>use: Accounting Api Workflow
Get cancellations
? Verify there are "10" cancellations
Begin verifying cancellation item "1"
    ? Verify cancellation date is "1/1/2023"
    ? Verify cancellation reason is "Transfer to Different Class"
    ? Verify cancellation amount is "101.42"
    ? Verify cancellation bill date is "1/1/2023"
    ? Verify cancellation bill for is "Bradley, Blake"
    ? Verify cancellation Bill To is "Bradley, Blake"
    ? Verify cancellation category is "Class"
    ? Verify cancellation description is "TUITION CHARGE for Bradley, Blake (B1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify cancellation event is "Driving - Highway Pursuit 100"
    ? Verify cancellation item is "Driving - Highway Pursuit 100"
    ? Verify cancellation period start is blank
    ? Verify cancellation period end is blank
    ? Verify cancellation quantity is "1"
    ? Verify cancellation unit price is "101.42"
    ? Verify cancellation usage is blank
Begin verifying cancellation item "2"
    ? Verify cancellation date is "1/1/2023"
    ? Verify cancellation reason is "Deleted Enrollment"
    ? Verify cancellation amount is "99.99"
    ? Verify cancellation bill date is "1/1/2023"
    ? Verify cancellation bill for is "Doo, Dewbie"
    ? Verify cancellation Bill To is "Doo, Dewbie"
    ? Verify cancellation category is "Class"
    ? Verify cancellation description is "TUITION CHARGE for Doo, Dewbie (D1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify cancellation event is "Driving - Highway Pursuit 100"
    ? Verify cancellation item is "Driving - Highway Pursuit 100"
    ? Verify cancellation period start is blank
    ? Verify cancellation period end is blank
    ? Verify cancellation quantity is "1"
    ? Verify cancellation unit price is "99.99"
    ? Verify cancellation usage is blank
Begin verifying cancellation item "3"
    ? Verify cancellation date is "1/1/2023"
    ? Verify cancellation reason is "Cancelled Registration"
    ? Verify cancellation amount is "131.45"
    ? Verify cancellation bill date is "1/1/2023"
    ? Verify cancellation bill for is "Bradley, Blake"
    ? Verify cancellation Bill To is "Bradley, Blake"
    ? Verify cancellation category is "Class"
    ? Verify cancellation description is "TUITION CHARGE for Bradley, Blake (B1): Driving - Highway Pursuit 101 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify cancellation event is "Driving - Highway Pursuit 101"
    ? Verify cancellation item is "Driving - Highway Pursuit 101"
    ? Verify cancellation period start is blank
    ? Verify cancellation period end is blank
    ? Verify cancellation quantity is "1"
    ? Verify cancellation unit price is "131.45"
    ? Verify cancellation usage is blank
Begin verifying cancellation item "4"
    ? Verify cancellation date is "1/1/2023"
    ? Verify cancellation reason is "Cancelled Class"
    ? Verify cancellation amount is "99.99"
    ? Verify cancellation bill date is "1/1/2023"
    ? Verify cancellation bill for is "Chase, Charles"
    ? Verify cancellation Bill To is "Chase, Charles"
    ? Verify cancellation category is "Class"
    ? Verify cancellation description is "TUITION CHARGE for Chase, Charles (C1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify cancellation event is "Driving - Highway Pursuit 100"
    ? Verify cancellation item is "Driving - Highway Pursuit 100"
    ? Verify cancellation period start is blank
    ? Verify cancellation period end is blank
    ? Verify cancellation quantity is "1"
    ? Verify cancellation unit price is "99.99"
    ? Verify cancellation usage is blank
Begin verifying cancellation item "5"
    ? Verify cancellation date is "1/1/2023"
    ? Verify cancellation reason is "Deleted Registration"
    ? Verify cancellation amount is "101.42"
    ? Verify cancellation bill date is "1/1/2023"
    ? Verify cancellation bill for is "Eady, Forrest"
    ? Verify cancellation Bill To is "Eady, Forrest"
    ? Verify cancellation category is "Class"
    ? Verify cancellation description is "TUITION CHARGE for Eady, Forrest (E2): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify cancellation event is "Driving - Highway Pursuit 100"
    ? Verify cancellation item is "Driving - Highway Pursuit 100"
    ? Verify cancellation period start is blank
    ? Verify cancellation period end is blank
    ? Verify cancellation quantity is "1"
    ? Verify cancellation unit price is "101.42"
    ? Verify cancellation usage is blank
Begin verifying cancellation item "6"
    ? Verify cancellation date is "1/1/2023"
    ? Verify cancellation reason is "Move to Pending"
    ? Verify cancellation amount is "104.99"
    ? Verify cancellation bill date is "1/1/2023"
    ? Verify cancellation bill for is "Brown, Wendell"
    ? Verify cancellation Bill To is "Brown, Wendell"
    ? Verify cancellation category is "Class"
    ? Verify cancellation description is "TUITION CHARGE for Brown, Wendell (B2): Driving - Highway Pursuit 101 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify cancellation event is "Driving - Highway Pursuit 101"
    ? Verify cancellation item is "Driving - Highway Pursuit 101"
    ? Verify cancellation period start is blank
    ? Verify cancellation period end is blank
    ? Verify cancellation quantity is "1"
    ? Verify cancellation unit price is "104.99"
    ? Verify cancellation usage is blank
Begin verifying cancellation item "7"
    ? Verify cancellation date is "1/1/2023"
    ? Verify cancellation reason is "Deleted Person"
    ? Verify cancellation amount is "104.99"
    ? Verify cancellation bill date is "1/1/2023"
    ? Verify cancellation bill for is "Worthen, Jorge"
    ? Verify cancellation Bill To is "Worthen, Jorge"
    ? Verify cancellation category is "Class"
    ? Verify cancellation description is "TUITION CHARGE for Worthen, Jorge (W1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify cancellation event is "Driving - Highway Pursuit 100"
    ? Verify cancellation item is "Driving - Highway Pursuit 100"
    ? Verify cancellation period start is blank
    ? Verify cancellation period end is blank
    ? Verify cancellation quantity is "1"
    ? Verify cancellation unit price is "104.99"
    ? Verify cancellation usage is blank
Begin verifying cancellation item "8"
    ? Verify cancellation date is "1/1/2023"
    ? Verify cancellation reason is "Move to Waitlist"
    ? Verify cancellation amount is "104.99"
    ? Verify cancellation bill date is "1/1/2023"
    ? Verify cancellation bill for is "Murphy, Sam"
    ? Verify cancellation Bill To is "Murphy, Sam"
    ? Verify cancellation category is "Class"
    ? Verify cancellation description is "TUITION CHARGE for Murphy, Sam (M1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify cancellation event is "Driving - Highway Pursuit 100"
    ? Verify cancellation item is "Driving - Highway Pursuit 100"
    ? Verify cancellation period start is blank
    ? Verify cancellation period end is blank
    ? Verify cancellation quantity is "1"
    ? Verify cancellation unit price is "104.99"
    ? Verify cancellation usage is blank
Begin verifying cancellation item "9"
    ? Verify cancellation date is "1/1/2023"
    ? Verify cancellation reason is "Move to Waitlist"
    ? Verify cancellation amount is "101.42"
    ? Verify cancellation bill date is "1/1/2023"
    ? Verify cancellation bill for is "Johnson, Danny"
    ? Verify cancellation Bill To is "Johnson, Danny"
    ? Verify cancellation category is "Class"
    ? Verify cancellation description is "TUITION CHARGE for Johnson, Danny (J1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify cancellation event is "Driving - Highway Pursuit 100"
    ? Verify cancellation item is "Driving - Highway Pursuit 100"
    ? Verify cancellation period start is blank
    ? Verify cancellation period end is blank
    ? Verify cancellation quantity is "1"
    ? Verify cancellation unit price is "101.42"
    ? Verify cancellation usage is blank
Begin verifying cancellation item "10"
    ? Verify cancellation date is "1/1/2023"
    ? Verify cancellation reason is "Cancelled Registration"
    ? Verify cancellation amount is "200.00"
    ? Verify cancellation bill date is "1/1/2023"
    ? Verify cancellation bill for is "Fairchild, Florence"
    ? Verify cancellation Bill To is "Fairchild, Florence"
    ? Verify cancellation category is "Class"
    ? Verify cancellation description is "TUITION CHARGE for Fairchild, Florence (F1): Driving - Highway Pursuit 100 (occurring 01/01/2023 - 01/01/2023)"
    ? Verify cancellation event is "Driving - Highway Pursuit 100"
    ? Verify cancellation item is "Driving - Highway Pursuit 100"
    ? Verify cancellation period start is blank
    ? Verify cancellation period end is blank
    ? Verify cancellation quantity is "1"
    ? Verify cancellation unit price is "200.00"
    ? Verify cancellation usage is blank



// -- COMPLETION --------------------------------------------------------------
[Not Implemented]
"Change billing to at completion with variable fee":
>use: Billing Preferences Workflow
Browse to page
Click to edit category "Class"
Choose to track category
Choose to create billing information "At completion"
Choose to calculate billing as a variable fee
Choose "Individual" to be responsible for fees
Prepare to save preference
Click save preference

[Not Implemented]
"Register person E":
>use: Register Student Workflow
Browse to page from available training list registering for "Highway Pursuit 102"
Select student "Easley, Erwin"
Select  "Individual" for Tuition Bill to Party
Click Register

[Not Implemented]
"Verify no bill was created at registration":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "4" items

[Not Implemented]
"Enroll person A":
>use: Student Registration Update Verification Workflow
Enroll registered students "Easley, Erwin" in "Highway Pursuit 102"
? Verify no errors are shown

[Not Implemented]
"Verify no bill was created at enrollment":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "4" items

[Not Implemented]
"Complete class":
>use: Task Runner Workflow
Set today to "2/1/2023"
Run task "AutoUpdateClassStatus"

[Not Implemented]
"Verify no bill was created at enrollment":
>use: Billing Items Export Workflow
Export all billing items
? Verify there are "5" items
? Verify row "5"
? Verify "Category" is "Class"
? Verify "Bill Created At" is "Completion"
? Verify "Event / Class*" is "Driving - Highway Pursuit 102"
? Verify "Billing Item" is "Driving - Highway Pursuit 100"
? Verify "Billing Usage" is ""
? Verify "Usage Period Start" is ""
? Verify "Usage Period End" is ""
? Verify "For" is "Easley, Erwin"
? Verify "Date" is equal to today
? Verify "Bill To" is "Easley, Erwin"
? Verify "Amount" is "152.55"
